<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Undangan Pernikahan Choirun & Asri</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Poppins:wght@300;400&family=Great+Vibes&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Playfair Display',serif;
  background:#f5efe6;
  color:#5a4632;
  text-align:center;
}
.cover{
  position:fixed;
  inset:0;
  background:linear-gradient(180deg,#f5efe6,#fff);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:9999;
}
.cover-inner{padding:40px}
.cover-title{font-family:'Great Vibes',cursive;font-size:40px}
.cover button{
  margin-top:20px;
  padding:14px 30px;
  border-radius:30px;
  border:none;
  background:#d8c3a5;
  font-size:16px;
  cursor:pointer;
}
.section{
  margin:48px 18px;
  padding:70px 24px;
  background:#fff;
  border-radius:26px;
  border:2px solid #e6d3b1;
  box-shadow:0 12px 32px rgba(0,0,0,.08);
}
.divider{margin:30px 0;color:#d8c3a5;letter-spacing:6px}
input,select,textarea{
  width:100%;
  padding:12px;
  margin:8px 0;
  border-radius:12px;
  border:1px solid #e0d0b8;
  font-family:Poppins,sans-serif;
}
button{
  background:#d8c3a5;
  border:none;
  padding:12px 22px;
  border-radius:25px;
  font-size:16px;
}
.comment{
  border:1px solid #e6d3b1;
  border-radius:12px;
  padding:12px;
  margin-bottom:12px;
  text-align:left;
}
</style>
</head>

<body>

<!-- COVER -->
<div class="cover" id="cover">
  <div class="cover-inner">
    <p>Bismillahirrahmanirrahim</p>
    <h1 class="cover-title">Choirun Anwar</h1>
    <p>&</p>
    <h1 class="cover-title">Asri Widyasari</h1>
    <p>Ahad, 29 Maret 2026</p>
    <button onclick="document.getElementById('cover').style.display='none'">
      Buka Undangan
    </button>
  </div>
</div>

<!-- MEMPELAI -->
<section class="section">
<h2>1. Mempelai</h2>

<svg width="220" height="220" viewBox="0 0 220 220">
  <circle cx="110" cy="110" r="105" fill="#f7efe4" stroke="#e6d3b1" stroke-width="4"/>
  <circle cx="90" cy="100" r="10" fill="#b89b6a"/>
  <circle cx="130" cy="100" r="10" fill="#b89b6a"/>
  <path d="M95 120 Q110 130 125 120" fill="none" stroke="#b89b6a" stroke-width="3"/>
</svg>

<p><strong>Choirun Anwar</strong><br>
Putra dari Bapak Suseno Aji & Ibu Alimah</p>

<p><strong>Asri Widyasari</strong><br>
Putri dari Bapak Sutanto & Ibu Juariyah</p>
</section>

<div class="divider">❀ ❀ ❀</div>

<!-- AYAT -->
<section class="section">
<p>
"Dan di antara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan pasangan-pasangan untukmu dari jenismu sendiri,
agar kamu cenderung dan merasa tenteram kepadanya, dan Dia menjadikan di antaramu rasa kasih dan sayang."
</p>
<p><strong>(QS. Ar-Rum: 21)</strong></p>
</section>

<div class="divider">❀ ❀ ❀</div>

<!-- LOKASI -->
<section class="section">
<h2>2. Lokasi</h2>
<p>
Dk. Semboja Timur RT 003 RW 001<br>
Ds. Kaliboja, Kec. Paninggaran<br>
Kab. Pekalongan
</p>
<iframe
  src="https://www.google.com/maps?q=Dk.%20Semboja%20Timur%20RT%20003%20RW%20001%20Ds.%20Kaliboja%20Kec.%20Paninggaran%20Kab.%20Pekalongan&output=embed"
  width="100%" height="250" style="border-radius:12px;border:0">
</iframe>
</section>

<div class="divider">❀ ❀ ❀</div>

<!-- RSVP + KOMENTAR GLOBAL -->
<section class="section" id="rsvp">
<h2>3. Konfirmasi Kehadiran & Ucapan</h2>

<form id="commentForm" style="max-width:420px;margin:auto">
  <input id="nama" placeholder="Nama Anda" required>
  <select id="hadir" required>
    <option value="">Kehadiran</option>
    <option value="Hadir">Hadir</option>
    <option value="Tidak Hadir">Tidak Hadir</option>
  </select>
  <textarea id="pesan" rows="4" placeholder="Ucapan & doa"></textarea>
  <button type="submit">Kirim</button>
</form>

<div style="margin:20px">
  <button onclick="setFilter('all')">Semua</button>
  <button onclick="setFilter('Hadir')">Hanya Hadir</button>
</div>

<div id="commentList"></div>
</section>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBKCsMeNeZaaZRUmfX-ZrvvAI8hGMEJUJg",
  authDomain: "undangan-irun-asri.firebaseapp.com",
  projectId: "undangan-irun-asri",
  storageBucket: "undangan-irun-asri.firebasestorage.app",
  messagingSenderId: "1006634249280",
  appId: "1:1006634249280:web:e2aad85965c67fdb1443a5"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

let currentFilter='all';
let unsubscribe=null;

commentForm.addEventListener('submit', async (e)=>{
  e.preventDefault();
  await db.collection('komentar').add({
    nama:nama.value,
    hadir:hadir.value,
    pesan:pesan.value,
    waktu:firebase.firestore.FieldValue.serverTimestamp()
  });
  commentForm.reset();
});

function setFilter(f){
  currentFilter=f;
  loadComments();
}

function loadComments(){
  if(unsubscribe) unsubscribe();
  let q=db.collection('komentar').orderBy('waktu','desc');
  if(currentFilter==='Hadir'){
    q=q.where('hadir','==','Hadir');
  }
  unsubscribe=q.onSnapshot(snapshot=>{
    commentList.innerHTML='';
    snapshot.forEach(doc=>{
      const d=doc.data();
      commentList.innerHTML+=`
        <div class="comment">
          <strong>${d.nama}</strong> (${d.hadir})<br>
          ${d.pesan}
        </div>`;
    });
  });
}
loadComments();
</script>

</body>
</html>
